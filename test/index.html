<!doctype html>
<html>
	<head>
	
	<meta charset="utf-8">
	<title>json-builder</title>
	
	<link rel="stylesheet" href="css/style.css">

	</head>
	<body>

	<div id="wrap">
		<form id="form"></div>
		<textarea id="output"></textarea>
	</div>
	
	<script src="js/jquery.js"></script>
	<script src="js/handlebars.runtime.js"></script>

	<script src="../src/builder.js"></script>
	<script src="../src/builder.templates.js"></script>

	<script>
	$(function() {
		var form = $("#form");
		var builder = new Builder(form);

		$.ajax({
		  dataType: "json",
			url: "json/schema.json",
			cache: false,
			success: function(data) {
				builder.init(data);
				$.ajax({
					dataType: "json",
					url: "json/resume.json",
					cache: false,
					success: function(data) {
						builder.setFormValues(data);
					}
				});
			}
		});

		var output = $("#output");
		form.on("change", function() {
			output.html(builder.getFormValuesAsJSON());
			console.log("`change` triggered");
		});
	});
	</script>
	
	</body>
</html>
